<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Secure Access — Pakistan Army AI Directorate</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --g:#01d96b;--g2:rgba(1,217,107,0.12);--g3:rgba(1,217,107,0.35);
  --r:#ff3355;--r2:rgba(255,51,85,0.12);--r3:rgba(255,51,85,0.35);
  --bg:#020c14;--s1:#040f1c;--s2:#071626;--card:#091d30;
  --border:rgba(1,217,107,0.18);--text:#c8dde8;--dim:#5a7a8a;
}
html,body{width:100%;height:100%;overflow:hidden}
body{background:var(--bg);display:flex;align-items:center;justify-content:center;font-family:'Rajdhani',sans-serif}

/* RADAR BACKGROUND */
#bg-canvas{position:fixed;inset:0;width:100%;height:100%;opacity:.35}

/* SCANLINES */
body::after{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.08) 2px,rgba(0,0,0,.08) 4px);pointer-events:none;z-index:0}

/* CARD */
.card{position:relative;z-index:10;width:100%;max-width:420px;padding:0 1.5rem}

/* HEADER */
.logo-wrap{text-align:center;margin-bottom:2.5rem}
.logo-emblem{width:72px;height:72px;margin:0 auto 1.2rem;position:relative}
.logo-emblem canvas{display:block}
.logo-title{font-family:'Orbitron',sans-serif;font-size:1rem;font-weight:900;letter-spacing:.2em;color:#fff;margin-bottom:.3rem}
.logo-sub{font-family:'JetBrains Mono',monospace;font-size:.6rem;letter-spacing:.25em;color:var(--dim)}
.logo-badge{display:inline-flex;align-items:center;gap:.4rem;margin-top:.9rem;padding:.3rem .9rem;border:1px solid var(--g3);background:var(--g2);border-radius:2rem;font-family:'JetBrains Mono',monospace;font-size:.6rem;letter-spacing:.15em;color:var(--g)}
.badge-dot{width:6px;height:6px;border-radius:50%;background:var(--g);animation:blink 1.2s step-end infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}

/* FORM BOX */
.form-box{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:2rem;position:relative;overflow:hidden}
.form-box::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--g),transparent)}

.form-label{font-family:'JetBrains Mono',monospace;font-size:.62rem;letter-spacing:.2em;color:var(--dim);margin-bottom:.5rem;display:block}
.form-group{margin-bottom:1.25rem;position:relative}
.form-input{width:100%;background:var(--s1);border:1px solid rgba(1,217,107,0.2);border-radius:6px;padding:.85rem 1rem .85rem 2.8rem;font-family:'Rajdhani',sans-serif;font-size:1rem;font-weight:500;color:#fff;outline:none;transition:border-color .25s,box-shadow .25s;letter-spacing:.05em}
.form-input::placeholder{color:var(--dim);font-weight:400}
.form-input:focus{border-color:var(--g);box-shadow:0 0 0 3px var(--g2)}
.input-icon{position:absolute;left:.9rem;top:50%;transform:translateY(-50%);color:var(--dim);font-size:.85rem;pointer-events:none;transition:color .25s}
.form-group:focus-within .input-icon{color:var(--g)}

/* show/hide password toggle */
.toggle-pw{position:absolute;right:.9rem;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:var(--dim);font-size:.8rem;font-family:'JetBrains Mono',monospace;letter-spacing:.05em;transition:color .2s;padding:.2rem .4rem}
.toggle-pw:hover{color:var(--g)}

/* LOGIN BTN */
.btn-login{width:100%;padding:1rem;background:var(--g);border:none;border-radius:6px;font-family:'Orbitron',sans-serif;font-size:.8rem;font-weight:700;letter-spacing:.2em;color:#000;cursor:pointer;transition:all .25s;position:relative;overflow:hidden;margin-top:.5rem}
.btn-login:hover{background:#fff;box-shadow:0 0 20px var(--g3)}
.btn-login:active{transform:scale(.98)}
.btn-login.loading{pointer-events:none;opacity:.8}
.btn-login .btn-text{display:block;transition:opacity .2s}
.btn-login .btn-spinner{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s}
.btn-login.loading .btn-text{opacity:0}
.btn-login.loading .btn-spinner{opacity:1}
.spinner{width:18px;height:18px;border:2px solid rgba(0,0,0,.3);border-top-color:#000;border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* ERROR / SUCCESS */
.msg-box{margin-top:1rem;padding:.75rem 1rem;border-radius:6px;font-family:'JetBrains Mono',monospace;font-size:.7rem;letter-spacing:.1em;display:none;align-items:center;gap:.6rem}
.msg-box.error{display:flex;background:var(--r2);border:1px solid var(--r3);color:var(--r)}
.msg-box.success{display:flex;background:var(--g2);border:1px solid var(--g3);color:var(--g)}

/* FOOTER */
.login-footer{text-align:center;margin-top:1.5rem;font-family:'JetBrains Mono',monospace;font-size:.58rem;letter-spacing:.12em;color:var(--dim);line-height:1.8}

/* shake animation */
@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-6px)}80%{transform:translateX(6px)}}
.shake{animation:shake .4s ease}
</style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<div class="card">
  <div class="logo-wrap">
    <div class="logo-emblem">
      <canvas id="emblem-canvas" width="72" height="72"></canvas>
    </div>
    <div class="logo-title">PAKISTAN ARMY</div>
    <div class="logo-sub">ARTIFICIAL INTELLIGENCE DIRECTORATE</div>
    <div class="logo-badge"><span class="badge-dot"></span> SECURE CLASSIFIED ACCESS</div>
  </div>

  <div class="form-box" id="form-box">
    <div class="form-group">
      <label class="form-label" for="username">ACCESS ID</label>
      <span class="input-icon">◈</span>
      <input class="form-input" id="username" type="text" placeholder="Enter access ID" autocomplete="username" autocapitalize="none" spellcheck="false">
    </div>

    <div class="form-group">
      <label class="form-label" for="password">ACCESS CODE</label>
      <span class="input-icon">⬡</span>
      <input class="form-input" id="password" type="password" placeholder="Enter access code" autocomplete="current-password">
      <button class="toggle-pw" id="toggle-pw" type="button" tabindex="-1">SHOW</button>
    </div>

    <button class="btn-login" id="btn-login">
      <span class="btn-text">AUTHENTICATE →</span>
      <span class="btn-spinner"><span class="spinner"></span></span>
    </button>

    <div class="msg-box" id="msg-box"></div>
  </div>

  <div class="login-footer">
    CLASSIFIED // FOR AUTHORISED PERSONNEL ONLY<br>
    UNAUTHORISED ACCESS IS A CRIMINAL OFFENCE
  </div>
</div>

<script>
// ─── AUTH TOKEN ───
// SHA-256 of "admin:pakistan2026" computed via SubtleCrypto
// Stored token in localStorage after successful login
const SESSION_KEY = 'pak-ai-auth';
const EXPECTED_USER = 'admin';

async function hashString(str) {
  const enc = new TextEncoder();
  const buf = await crypto.subtle.digest('SHA-256', enc.encode(str));
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
}

// If already authenticated, skip login
(async()=>{
  const stored = localStorage.getItem(SESSION_KEY);
  if(stored) {
    const expected = await hashString(EXPECTED_USER + ':pakistan2026');
    if(stored === expected) window.location.replace('briefing.html');
  }
})();

// ─── FORM LOGIC ───
const btn = document.getElementById('btn-login');
const msg = document.getElementById('msg-box');
const uInput = document.getElementById('username');
const pInput = document.getElementById('password');
const togglePw = document.getElementById('toggle-pw');
const formBox = document.getElementById('form-box');

togglePw.addEventListener('click',()=>{
  if(pInput.type==='password'){pInput.type='text';togglePw.textContent='HIDE';}
  else{pInput.type='password';togglePw.textContent='SHOW';}
});

function showMsg(type, text){
  msg.className='msg-box '+type;
  msg.innerHTML=(type==='error'?'✕ ':'✓ ')+text;
}

async function doLogin(){
  const user = uInput.value.trim();
  const pass = pInput.value;
  if(!user||!pass){showMsg('error','ALL FIELDS REQUIRED');formBox.classList.add('shake');setTimeout(()=>formBox.classList.remove('shake'),400);return;}

  btn.classList.add('loading');
  msg.className='msg-box';

  // Simulate auth delay for realism
  await new Promise(r=>setTimeout(r,900));

  if(user.toLowerCase()===EXPECTED_USER){
    const entered = await hashString(user.toLowerCase()+':'+pass);
    const expected = await hashString(EXPECTED_USER+':pakistan2026');
    if(entered===expected){
      showMsg('success','ACCESS GRANTED — LOADING SYSTEM');
      localStorage.setItem(SESSION_KEY, expected);
      setTimeout(()=>window.location.replace('briefing.html'),800);
      return;
    }
  }

  btn.classList.remove('loading');
  showMsg('error','INVALID CREDENTIALS — ACCESS DENIED');
  formBox.classList.add('shake');
  setTimeout(()=>formBox.classList.remove('shake'),400);
  pInput.value='';
  pInput.focus();
}

btn.addEventListener('click', doLogin);
document.addEventListener('keydown', e=>{ if(e.key==='Enter') doLogin(); });

// ─── EMBLEM CANVAS (small radar) ───
(function(){
  const c = document.getElementById('emblem-canvas');
  const ctx = c.getContext('2d');
  const W=72,H=72,cx=36,cy=36;
  let ang=0;
  const dots=[];
  for(let i=0;i<20;i++) dots.push({a:Math.random()*Math.PI*2,r:8+Math.random()*24,v:.006+Math.random()*.01,al:Math.random()*.7+.2});
  function frame(){
    ctx.clearRect(0,0,W,H);
    [8,16,24,32].forEach(r=>{
      ctx.beginPath();ctx.arc(cx,cy,r,0,Math.PI*2);
      ctx.strokeStyle='rgba(1,217,107,0.15)';ctx.lineWidth=.8;ctx.stroke();
    });
    ctx.strokeStyle='rgba(1,217,107,0.12)';ctx.lineWidth=.5;
    ctx.beginPath();ctx.moveTo(cx-36,cy);ctx.lineTo(cx+36,cy);ctx.stroke();
    ctx.beginPath();ctx.moveTo(cx,cy-36);ctx.lineTo(cx,cy+36);ctx.stroke();
    // sweep
    const gr=ctx.createRadialGradient(cx,cy,0,cx,cy,32);
    gr.addColorStop(0,'rgba(1,217,107,0.45)');gr.addColorStop(1,'rgba(1,217,107,0)');
    ctx.save();ctx.beginPath();ctx.moveTo(cx,cy);ctx.arc(cx,cy,32,ang,ang+1.0);ctx.closePath();
    ctx.fillStyle=gr;ctx.fill();ctx.restore();
    dots.forEach(d=>{
      d.a+=d.v;
      const x=cx+Math.cos(d.a)*d.r,y=cy+Math.sin(d.a)*d.r;
      ctx.beginPath();ctx.arc(x,y,1.2,0,Math.PI*2);
      ctx.fillStyle=`rgba(1,217,107,${d.al})`;ctx.fill();
    });
    ctx.beginPath();ctx.arc(cx,cy,3,0,Math.PI*2);
    ctx.fillStyle='#01d96b';ctx.fill();
    ang+=.035;
    requestAnimationFrame(frame);
  }
  frame();
})();

// ─── BG CANVAS (large radar) ───
(function(){
  const c = document.getElementById('bg-canvas');
  const ctx = c.getContext('2d');
  let W,H,cx,cy,ang=0;
  const dots=[];
  function resize(){
    W=c.width=window.innerWidth;H=c.height=window.innerHeight;
    cx=W/2;cy=H/2;
    dots.length=0;
    const maxR=Math.min(W,H)*.45;
    for(let i=0;i<80;i++) dots.push({a:Math.random()*Math.PI*2,r:maxR*.1+Math.random()*maxR*.9,v:.002+Math.random()*.005,al:.1+Math.random()*.4});
  }
  resize();window.addEventListener('resize',resize);
  function frame(){
    ctx.clearRect(0,0,W,H);
    const maxR=Math.min(W,H)*.45;
    [.2,.4,.6,.8,1].forEach(f=>{
      ctx.beginPath();ctx.arc(cx,cy,maxR*f,0,Math.PI*2);
      ctx.strokeStyle='rgba(1,217,107,0.06)';ctx.lineWidth=1;ctx.stroke();
    });
    ctx.strokeStyle='rgba(1,217,107,0.05)';ctx.lineWidth=.5;
    ctx.beginPath();ctx.moveTo(0,cy);ctx.lineTo(W,cy);ctx.stroke();
    ctx.beginPath();ctx.moveTo(cx,0);ctx.lineTo(cx,H);ctx.stroke();
    // diagonals
    ctx.beginPath();ctx.moveTo(cx-maxR,cy-maxR);ctx.lineTo(cx+maxR,cy+maxR);ctx.stroke();
    ctx.beginPath();ctx.moveTo(cx+maxR,cy-maxR);ctx.lineTo(cx-maxR,cy+maxR);ctx.stroke();
    // sweep
    const gr=ctx.createRadialGradient(cx,cy,0,cx,cy,maxR);
    gr.addColorStop(0,'rgba(1,217,107,0.2)');gr.addColorStop(.7,'rgba(1,217,107,0.04)');gr.addColorStop(1,'rgba(1,217,107,0)');
    ctx.save();ctx.beginPath();ctx.moveTo(cx,cy);ctx.arc(cx,cy,maxR,ang,ang+1.1);ctx.closePath();
    ctx.fillStyle=gr;ctx.fill();ctx.restore();
    // trailing glow
    const grT=ctx.createRadialGradient(cx,cy,0,cx,cy,maxR);
    grT.addColorStop(0,'rgba(1,217,107,0.05)');grT.addColorStop(1,'rgba(1,217,107,0)');
    ctx.save();ctx.beginPath();ctx.moveTo(cx,cy);ctx.arc(cx,cy,maxR,ang-0.8,ang);ctx.closePath();
    ctx.fillStyle=grT;ctx.fill();ctx.restore();
    // dots
    dots.forEach(d=>{
      d.a+=d.v;
      const x=cx+Math.cos(d.a)*d.r,y=cy+Math.sin(d.a)*d.r;
      ctx.beginPath();ctx.arc(x,y,1.5,0,Math.PI*2);
      ctx.fillStyle=`rgba(1,217,107,${d.al})`;ctx.fill();
    });
    ang+=.018;
    requestAnimationFrame(frame);
  }
  frame();
})();
</script>
</body>
</html>
